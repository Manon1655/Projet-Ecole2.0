/* ===============================
   VARIABLES
================================ */

:root {
  --beige: #f3efe6;
  --beige-dark: #e4dccf;
  --ink: #3a3a32;
}

/* ===============================
   SCÈNE GLOBALE
================================ */

.scene {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  font-family: "Georgia", serif;
  background: #000;
}

/* ===============================
   FOND IMAGE
================================ */

.bg-image {
  position: absolute;
  inset: 0;
  background-image: url("/assets/background/image.png");
  background-size: cover;
  background-position: center;
  filter: brightness(0.95) saturate(1.1);
  transform: scale(1.05);
  z-index: 0;
}

/* Lumière douce */
.bg-light {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at 50% 45%,
    rgba(255,220,160,0.6),
    transparent 60%
  );
  pointer-events: none;
  z-index: 1;
}

body.intro-page {
  overflow: hidden;
  height: 100vh;
}

body.intro-page footer,
body.intro-page nav,
body.intro-page header,
body.intro-page .navbar {
  display: none;
}

/* ===============================
   ÉTOILES — FOND VIVANT
================================ */

.fairy-dust {
  position: absolute;
  inset: -400px;
  pointer-events: none;
  z-index: 5;

  background:
    radial-gradient(circle, rgba(255,255,255,0.9) 0.8px, rgba(255,255,255,0.4) 2px, transparent 6px),
    radial-gradient(circle, rgba(255,235,190,0.9) 1px, rgba(255,220,160,0.4) 3px, transparent 7px),
    radial-gradient(circle, rgba(255,255,255,0.6) 0.6px, rgba(255,255,255,0.2) 2px, transparent 5px);

  background-size: 200px 200px, 340px 340px, 520px 520px;
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.35));

  animation:
    starDrift 260s linear infinite,
    starTwinkle 6s ease-in-out infinite;
}

@keyframes starDrift {
  to {
    background-position:
      1600px -1200px,
      -2000px 1800px,
      1200px 2400px;
  }
}

@keyframes starTwinkle {
  0% { opacity: 0.4; }
  30% { opacity: 1; }
  60% { opacity: 0.6; }
  100% { opacity: 0.85; }
}

/* ===============================
   POUSSIÈRES SOURIS
================================ */

.mouse-dust-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 8;
}

.mouse-dust {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: radial-gradient(circle, white, rgba(255,220,160,0.6), transparent);
  filter: drop-shadow(0 0 6px rgba(255,220,160,0.8));
  animation: mouseDustLife 1.6s ease-out forwards;
}

@keyframes mouseDustLife {
  0% { transform: scale(0.5); opacity: 0; }
  15% { opacity: 1; }
  100% {
    transform: scale(1.6) translate(
      calc(-20px + var(--dx)),
      calc(-40px + var(--dy))
    );
    opacity: 0;
  }
}

/* ===============================
   FÉE — ARRIVÉE PLUS TÔT
================================ */

.guardian {
  position: absolute;
  bottom: -40%;
  left: 50%;
  transform: translateX(-50%);
  width: 160px;
  height: 520px;
  opacity: 0;

  background:
    radial-gradient(
      ellipse at center,
      rgba(255,255,255,0.45),
      rgba(255,220,160,0.25),
      transparent 70%
    );

  filter:
    blur(1.4px)
    drop-shadow(0 0 50px rgba(255,240,200,1))
    drop-shadow(0 0 120px rgba(255,220,160,0.9));

  animation: guardianEnter 3s ease-out forwards;
  animation-delay: 0.2s;
}

@keyframes guardianEnter {
  to {
    bottom: 26%;
    opacity: 1;
  }
}

/* ===============================
   MAIN — TOUCHER PLUS RAPIDE
================================ */

.guardian-hand {
  position: absolute;
  bottom: 120px;
  left: 50%;
  width: 68px;
  height: 68px;
  transform: translateX(-50%);
  border-radius: 50%;

  background:
    radial-gradient(
      circle,
      rgba(255,255,255,1),
      rgba(255,240,200,0.9),
      rgba(255,220,160,0.6),
      transparent 75%
    );

  box-shadow:
    0 0 30px rgba(255,255,255,1),
    0 0 80px rgba(255,240,200,1),
    0 0 160px rgba(255,220,160,0.9);

  animation:
    handReach 2.4s cubic-bezier(.22,.68,.18,1) forwards,
    fairyPulse 1.6s ease-in-out infinite;

  animation-delay: 0.8s;
}

@keyframes handReach {
  0% { transform: translateX(-50%) translateY(0) scale(0.6); opacity: 0; }
  25% { opacity: 1; }
  70% { transform: translateX(-52%) translateY(-160px) scale(1); }
  100% { transform: translateX(-50%) translateY(-260px) scale(1.15); }
}

@keyframes fairyPulse {
  0%,100% { transform: translateX(-50%) scale(1); opacity: 0.85; }
  50% { transform: translateX(-50%) scale(1.35); opacity: 1; }
}

/* ===============================
   EXPLOSION D'ÉTOILES — REFAITE
================================ */

.scene.touched .fairy-dust {
  animation:
    starBurst 1.4s cubic-bezier(.2,.8,.2,1) forwards,
    starTwinkle 0.6s ease-in-out infinite;
}

@keyframes starBurst {
  0% {
    transform: scale(1);
    filter: drop-shadow(0 0 4px rgba(255,255,255,0.4));
  }
  100% {
    transform: scale(1.6);
    filter: drop-shadow(0 0 16px rgba(255,240,200,1));
  }
}

/* ===============================
   OUVERTURE DU MONDE
================================ */

.scene.touched {
  animation: worldOpen 0.9s ease-out forwards;
}

@keyframes worldOpen {
  to {
    filter: brightness(1.35) saturate(1.25);
  }
}

/* ===============================
   SORTIE INTRO
================================ */

.scene.exit {
  animation: introExit 1s ease forwards;
}

@keyframes introExit {
  to {
    opacity: 0;
    filter: blur(12px);
    transform: scale(1.05);
    pointer-events: none;
  }
}
